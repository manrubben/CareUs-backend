function cov_2hye7ykov(){var path="C:\\Users\\Manu\\IdeaProjects\\TFG\\server\\routes\\NotificacionMedicacion.js";var hash="647408718c997534b9de668faa378352762af6eb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Manu\\IdeaProjects\\TFG\\server\\routes\\NotificacionMedicacion.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:52},end:{line:3,column:72}},"3":{start:{line:4,column:26},end:{line:4,column:66}},"4":{start:{line:7,column:0},end:{line:54,column:3}},"5":{start:{line:9,column:16},end:{line:9,column:36}},"6":{start:{line:10,column:18},end:{line:10,column:42}},"7":{start:{line:11,column:34},end:{line:11,column:47}},"8":{start:{line:13,column:4},end:{line:13,column:39}},"9":{start:{line:15,column:4},end:{line:51,column:5}},"10":{start:{line:17,column:31},end:{line:21,column:10}},"11":{start:{line:24,column:8},end:{line:44,column:9}},"12":{start:{line:26,column:12},end:{line:33,column:14}},"13":{start:{line:35,column:15},end:{line:44,column:9}},"14":{start:{line:36,column:12},end:{line:43,column:14}},"15":{start:{line:48,column:8},end:{line:50,column:9}},"16":{start:{line:49,column:12},end:{line:49,column:30}},"17":{start:{line:53,column:4},end:{line:53,column:24}},"18":{start:{line:56,column:0},end:{line:105,column:3}},"19":{start:{line:58,column:34},end:{line:58,column:47}},"20":{start:{line:59,column:16},end:{line:59,column:36}},"21":{start:{line:60,column:22},end:{line:60,column:46}},"22":{start:{line:61,column:16},end:{line:61,column:32}},"23":{start:{line:63,column:4},end:{line:101,column:5}},"24":{start:{line:65,column:8},end:{line:69,column:10}},"25":{start:{line:71,column:31},end:{line:77,column:10}},"26":{start:{line:79,column:8},end:{line:95,column:9}},"27":{start:{line:80,column:12},end:{line:87,column:14}},"28":{start:{line:89,column:12},end:{line:94,column:18}},"29":{start:{line:98,column:8},end:{line:100,column:9}},"30":{start:{line:99,column:12},end:{line:99,column:30}},"31":{start:{line:103,column:4},end:{line:103,column:24}},"32":{start:{line:107,column:0},end:{line:148,column:3}},"33":{start:{line:109,column:34},end:{line:109,column:47}},"34":{start:{line:110,column:16},end:{line:110,column:36}},"35":{start:{line:111,column:22},end:{line:111,column:46}},"36":{start:{line:112,column:16},end:{line:112,column:32}},"37":{start:{line:114,column:4},end:{line:118,column:6}},"38":{start:{line:120,column:27},end:{line:126,column:6}},"39":{start:{line:128,column:4},end:{line:144,column:5}},"40":{start:{line:129,column:8},end:{line:136,column:10}},"41":{start:{line:138,column:8},end:{line:143,column:14}},"42":{start:{line:146,column:4},end:{line:146,column:24}},"43":{start:{line:149,column:0},end:{line:190,column:3}},"44":{start:{line:151,column:34},end:{line:151,column:47}},"45":{start:{line:152,column:16},end:{line:152,column:36}},"46":{start:{line:153,column:22},end:{line:153,column:46}},"47":{start:{line:154,column:16},end:{line:154,column:32}},"48":{start:{line:156,column:4},end:{line:160,column:6}},"49":{start:{line:162,column:27},end:{line:168,column:6}},"50":{start:{line:170,column:4},end:{line:186,column:5}},"51":{start:{line:171,column:8},end:{line:178,column:10}},"52":{start:{line:180,column:8},end:{line:185,column:14}},"53":{start:{line:188,column:4},end:{line:188,column:24}},"54":{start:{line:192,column:0},end:{line:205,column:3}},"55":{start:{line:193,column:34},end:{line:193,column:47}},"56":{start:{line:195,column:27},end:{line:199,column:6}},"57":{start:{line:201,column:28},end:{line:201,column:45}},"58":{start:{line:203,column:4},end:{line:203,column:30}},"59":{start:{line:208,column:0},end:{line:208,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:63},end:{line:7,column:64}},loc:{start:{line:7,column:83},end:{line:54,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:56,column:44},end:{line:56,column:45}},loc:{start:{line:56,column:64},end:{line:105,column:1}},line:56},"2":{name:"(anonymous_2)",decl:{start:{line:107,column:46},end:{line:107,column:47}},loc:{start:{line:107,column:66},end:{line:148,column:1}},line:107},"3":{name:"(anonymous_3)",decl:{start:{line:149,column:46},end:{line:149,column:47}},loc:{start:{line:149,column:66},end:{line:190,column:1}},line:149},"4":{name:"(anonymous_4)",decl:{start:{line:192,column:57},end:{line:192,column:58}},loc:{start:{line:192,column:77},end:{line:205,column:1}},line:192}},branchMap:{"0":{loc:{start:{line:24,column:8},end:{line:44,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:44,column:9}},{start:{line:24,column:8},end:{line:44,column:9}}],line:24},"1":{loc:{start:{line:35,column:15},end:{line:44,column:9}},type:"if",locations:[{start:{line:35,column:15},end:{line:44,column:9}},{start:{line:35,column:15},end:{line:44,column:9}}],line:35},"2":{loc:{start:{line:48,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:48,column:8},end:{line:50,column:9}},{start:{line:48,column:8},end:{line:50,column:9}}],line:48},"3":{loc:{start:{line:79,column:8},end:{line:95,column:9}},type:"if",locations:[{start:{line:79,column:8},end:{line:95,column:9}},{start:{line:79,column:8},end:{line:95,column:9}}],line:79},"4":{loc:{start:{line:98,column:8},end:{line:100,column:9}},type:"if",locations:[{start:{line:98,column:8},end:{line:100,column:9}},{start:{line:98,column:8},end:{line:100,column:9}}],line:98},"5":{loc:{start:{line:128,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:144,column:5}},{start:{line:128,column:4},end:{line:144,column:5}}],line:128},"6":{loc:{start:{line:170,column:4},end:{line:186,column:5}},type:"if",locations:[{start:{line:170,column:4},end:{line:186,column:5}},{start:{line:170,column:4},end:{line:186,column:5}}],line:170}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"647408718c997534b9de668faa378352762af6eb"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2hye7ykov=function(){return actualCoverage;};}return actualCoverage;}cov_2hye7ykov();const express=(cov_2hye7ykov().s[0]++,require("express"));const router=(cov_2hye7ykov().s[1]++,express.Router());const{NotificacionMedicacion,RegistrosDiarios}=(cov_2hye7ykov().s[2]++,require("../models"));const{validateToken}=(cov_2hye7ykov().s[3]++,require("../middlewares/AuthMiddleware"));cov_2hye7ykov().s[4]++;router.get('/createNotificacionMedicacion/:id',validateToken,async(req,res)=>{cov_2hye7ykov().f[0]++;//const {PersonasDependienteId} = req.body;
const hoy=(cov_2hye7ykov().s[5]++,new Date(Date.now()));const fecha=(cov_2hye7ykov().s[6]++,hoy.toLocaleDateString());const PersonasDependienteId=(cov_2hye7ykov().s[7]++,req.params.id);cov_2hye7ykov().s[8]++;console.log(PersonasDependienteId);cov_2hye7ykov().s[9]++;try{const notificaciones=(cov_2hye7ykov().s[10]++,await NotificacionMedicacion.findAll({where:{PersonasDependienteId:PersonasDependienteId}}));cov_2hye7ykov().s[11]++;if(notificaciones.length===0){cov_2hye7ykov().b[0][0]++;cov_2hye7ykov().s[12]++;await NotificacionMedicacion.create({fecha:fecha,dia:false,tarde:false,noche:false,PersonasDependienteId:PersonasDependienteId});}else{cov_2hye7ykov().b[0][1]++;cov_2hye7ykov().s[13]++;if(notificaciones[0].fecha!==fecha){cov_2hye7ykov().b[1][0]++;cov_2hye7ykov().s[14]++;await NotificacionMedicacion.update({fecha:fecha,dia:false,tarde:false,noche:false},{where:{PersonasDependienteId:PersonasDependienteId}});}else{cov_2hye7ykov().b[1][1]++;}}}catch(e){cov_2hye7ykov().s[15]++;if(e){cov_2hye7ykov().b[2][0]++;cov_2hye7ykov().s[16]++;return res.json(e);}else{cov_2hye7ykov().b[2][1]++;}}cov_2hye7ykov().s[17]++;res.json("SUCCESS");});cov_2hye7ykov().s[18]++;router.get('/updateDia/:id',validateToken,async(req,res)=>{cov_2hye7ykov().f[1]++;//const {PersonasDependienteId} = req.body;
const PersonasDependienteId=(cov_2hye7ykov().s[19]++,req.params.id);const hoy=(cov_2hye7ykov().s[20]++,new Date(Date.now()));const hoyString=(cov_2hye7ykov().s[21]++,hoy.toLocaleDateString());const mes=(cov_2hye7ykov().s[22]++,hoy.getMonth()+1);cov_2hye7ykov().s[23]++;try{cov_2hye7ykov().s[24]++;await NotificacionMedicacion.update({dia:true},{where:{PersonasDependienteId:PersonasDependienteId}});const registroDiario=(cov_2hye7ykov().s[25]++,await RegistrosDiarios.findOne({where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}}));cov_2hye7ykov().s[26]++;if(registroDiario===null){cov_2hye7ykov().b[3][0]++;cov_2hye7ykov().s[27]++;await RegistrosDiarios.create({fecha:hoyString,medicacionManana:true,medicacionTarde:false,medicacionNoche:false,mes:mes,PersonasDependienteId:PersonasDependienteId});}else{cov_2hye7ykov().b[3][1]++;cov_2hye7ykov().s[28]++;await RegistrosDiarios.update({medicacionManana:true},{where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}});}}catch(e){cov_2hye7ykov().s[29]++;if(e){cov_2hye7ykov().b[4][0]++;cov_2hye7ykov().s[30]++;return res.json(e);}else{cov_2hye7ykov().b[4][1]++;}}cov_2hye7ykov().s[31]++;res.json("SUCCESS");});cov_2hye7ykov().s[32]++;router.get('/updateTarde/:id',validateToken,async(req,res)=>{cov_2hye7ykov().f[2]++;//const {PersonasDependienteId} = req.body;
const PersonasDependienteId=(cov_2hye7ykov().s[33]++,req.params.id);const hoy=(cov_2hye7ykov().s[34]++,new Date(Date.now()));const hoyString=(cov_2hye7ykov().s[35]++,hoy.toLocaleDateString());const mes=(cov_2hye7ykov().s[36]++,hoy.getMonth()+1);cov_2hye7ykov().s[37]++;await NotificacionMedicacion.update({tarde:true},{where:{PersonasDependienteId:PersonasDependienteId}});const registroDiario=(cov_2hye7ykov().s[38]++,await RegistrosDiarios.findOne({where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}}));cov_2hye7ykov().s[39]++;if(registroDiario===null){cov_2hye7ykov().b[5][0]++;cov_2hye7ykov().s[40]++;await RegistrosDiarios.create({fecha:hoyString,medicacionManana:false,medicacionTarde:true,medicacionNoche:false,mes:mes,PersonasDependienteId:PersonasDependienteId});}else{cov_2hye7ykov().b[5][1]++;cov_2hye7ykov().s[41]++;await RegistrosDiarios.update({medicacionTarde:true},{where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}});}cov_2hye7ykov().s[42]++;res.json("SUCCESS");});cov_2hye7ykov().s[43]++;router.get('/updateNoche/:id',validateToken,async(req,res)=>{cov_2hye7ykov().f[3]++;//const {PersonasDependienteId} = req.body;
const PersonasDependienteId=(cov_2hye7ykov().s[44]++,req.params.id);const hoy=(cov_2hye7ykov().s[45]++,new Date(Date.now()));const hoyString=(cov_2hye7ykov().s[46]++,hoy.toLocaleDateString());const mes=(cov_2hye7ykov().s[47]++,hoy.getMonth()+1);cov_2hye7ykov().s[48]++;await NotificacionMedicacion.update({noche:true},{where:{PersonasDependienteId:PersonasDependienteId}});const registroDiario=(cov_2hye7ykov().s[49]++,await RegistrosDiarios.findOne({where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}}));cov_2hye7ykov().s[50]++;if(registroDiario===null){cov_2hye7ykov().b[6][0]++;cov_2hye7ykov().s[51]++;await RegistrosDiarios.create({fecha:hoyString,medicacionManana:false,medicacionTarde:false,medicacionNoche:true,mes:mes,PersonasDependienteId:PersonasDependienteId});}else{cov_2hye7ykov().b[6][1]++;cov_2hye7ykov().s[52]++;await RegistrosDiarios.update({medicacionNoche:true},{where:{PersonasDependienteId:PersonasDependienteId,fecha:hoyString}});}cov_2hye7ykov().s[53]++;res.json("SUCCESS");});cov_2hye7ykov().s[54]++;router.get('/notificacionMedicacion/:id',validateToken,async(req,res)=>{cov_2hye7ykov().f[4]++;const PersonasDependienteId=(cov_2hye7ykov().s[55]++,req.params.id);const notificaciones=(cov_2hye7ykov().s[56]++,await NotificacionMedicacion.findAll({where:{PersonasDependienteId:PersonasDependienteId}}));const notificacionMed=(cov_2hye7ykov().s[57]++,notificaciones[0]);cov_2hye7ykov().s[58]++;res.json(notificacionMed);});cov_2hye7ykov().s[59]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5vdGlmaWNhY2lvbk1lZGljYWNpb24uanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJOb3RpZmljYWNpb25NZWRpY2FjaW9uIiwiUmVnaXN0cm9zRGlhcmlvcyIsInZhbGlkYXRlVG9rZW4iLCJnZXQiLCJyZXEiLCJyZXMiLCJob3kiLCJEYXRlIiwibm93IiwiZmVjaGEiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJQZXJzb25hc0RlcGVuZGllbnRlSWQiLCJwYXJhbXMiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJub3RpZmljYWNpb25lcyIsImZpbmRBbGwiLCJ3aGVyZSIsImxlbmd0aCIsImNyZWF0ZSIsImRpYSIsInRhcmRlIiwibm9jaGUiLCJ1cGRhdGUiLCJlIiwianNvbiIsImhveVN0cmluZyIsIm1lcyIsImdldE1vbnRoIiwicmVnaXN0cm9EaWFyaW8iLCJmaW5kT25lIiwibWVkaWNhY2lvbk1hbmFuYSIsIm1lZGljYWNpb25UYXJkZSIsIm1lZGljYWNpb25Ob2NoZSIsIm5vdGlmaWNhY2lvbk1lZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJ3Z05BZVk7eUZBZlosS0FBTUEsQ0FBQUEsT0FBTyx5QkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQUgsQ0FBWixDQUNBLEtBQU0sQ0FBRUMsc0JBQUYsQ0FBMEJDLGdCQUExQiwwQkFBOENKLE9BQU8sQ0FBQyxXQUFELENBQXJELENBQU4sQ0FDQSxLQUFNLENBQUVLLGFBQUYsMEJBQW9CTCxPQUFPLENBQUMsK0JBQUQsQ0FBM0IsQ0FBTixDLHVCQUdBQyxNQUFNLENBQUNLLEdBQVAsQ0FBVyxtQ0FBWCxDQUFnREQsYUFBaEQsQ0FBK0QsTUFBT0UsR0FBUCxDQUFZQyxHQUFaLEdBQW9CLHdCQUMvRTtBQUNBLEtBQU1DLENBQUFBLEdBQUcseUJBQUcsR0FB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QUFLLENBQUVrQixTQURQLENBQVIsQ0FIRSxDQUFOLENBTUgsQ0FyQzZELHdCQXVDOUR0QixHQUFHLENBQUNxQixJQUFKLENBQVMsU0FBVCxFQUVILENBekNELEUsd0JBMkNBNUIsTUFBTSxDQUFDSyxHQUFQLENBQVcsNkJBQVgsQ0FBMENELGFBQTFDLENBQXlELE1BQU9FLEdBQVAsQ0FBWUMsR0FBWixHQUFvQix3QkFDekUsS0FBTU0sQ0FBQUEscUJBQXFCLDBCQUFHUCxHQUFHLENBQUNRLE1BQUosQ0FBV0MsRUFBZCxDQUEzQixDQUVBLEtBQU1HLENBQUFBLGNBQWMsMEJBQUcsS0FBTWhCLENBQUFBLHNCQUFzQixDQUFDaUIsT0FBdkIsQ0FBK0IsQ0FDeERDLEtBQUssQ0FBRSxDQUNIUCxxQkFBcUIsQ0FBRUEscUJBRHBCLENBRGlELENBQS9CLENBQVQsQ0FBcEIsQ0FNQSxLQUFNd0IsQ0FBQUEsZUFBZSwwQkFBR25CLGNBQWMsQ0FBQyxDQUFELENBQWpCLENBQXJCLENBVHlFLHdCQVd6RVgsR0FBRyxDQUFDcUIsSUFBSixDQUFTUyxlQUFULEVBRUgsQ0FiRCxFLHdCQWdCQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCdkMsTUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbmNvbnN0IHsgTm90aWZpY2FjaW9uTWVkaWNhY2lvbiwgUmVnaXN0cm9zRGlhcmlvc30gPSByZXF1aXJlKFwiLi4vbW9kZWxzXCIpO1xyXG5jb25zdCB7IHZhbGlkYXRlVG9rZW4gfSA9IHJlcXVpcmUoXCIuLi9taWRkbGV3YXJlcy9BdXRoTWlkZGxld2FyZVwiKTtcclxuXHJcblxyXG5yb3V0ZXIuZ2V0KCcvY3JlYXRlTm90aWZpY2FjaW9uTWVkaWNhY2lvbi86aWQnLCB2YWxpZGF0ZVRva2VuLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIC8vY29uc3Qge1BlcnNvbmFzRGVwZW5kaWVudGVJZH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGhveSA9IG5ldyBEYXRlKERhdGUubm93KCkpO1xyXG4gICAgY29uc3QgZmVjaGEgPSBob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICBjb25zdCBQZXJzb25hc0RlcGVuZGllbnRlSWQgPSByZXEucGFyYW1zLmlkO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFBlcnNvbmFzRGVwZW5kaWVudGVJZCk7XHJcblxyXG4gICAgdHJ5IHtcclxuXHJcbiAgICAgICAgY29uc3Qgbm90aWZpY2FjaW9uZXMgPSBhd2FpdCBOb3RpZmljYWNpb25NZWRpY2FjaW9uLmZpbmRBbGwoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgICAgUGVyc29uYXNEZXBlbmRpZW50ZUlkOiBQZXJzb25hc0RlcGVuZGllbnRlSWQsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgaWYobm90aWZpY2FjaW9uZXMubGVuZ3RoID09PSAwKSB7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBOb3RpZmljYWNpb25NZWRpY2FjaW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVjaGE6IGZlY2hhLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpYTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBQZXJzb25hc0RlcGVuZGllbnRlSWQ6IFBlcnNvbmFzRGVwZW5kaWVudGVJZCxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmKG5vdGlmaWNhY2lvbmVzWzBdLmZlY2hhICE9PSBmZWNoYSkge1xyXG4gICAgICAgICAgICBhd2FpdCBOb3RpZmljYWNpb25NZWRpY2FjaW9uLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBmZWNoYTogZmVjaGEsXHJcbiAgICAgICAgICAgICAgICBkaWE6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdGFyZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbm9jaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge3doZXJlOiB7UGVyc29uYXNEZXBlbmRpZW50ZUlkOiBQZXJzb25hc0RlcGVuZGllbnRlSWR9fVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKFwiU1VDQ0VTU1wiKTtcclxufSk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvdXBkYXRlRGlhLzppZCcsIHZhbGlkYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy9jb25zdCB7UGVyc29uYXNEZXBlbmRpZW50ZUlkfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgUGVyc29uYXNEZXBlbmRpZW50ZUlkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGhveSA9IG5ldyBEYXRlKERhdGUubm93KCkpO1xyXG4gICAgY29uc3QgaG95U3RyaW5nID0gaG95LnRvTG9jYWxlRGF0ZVN0cmluZygpXHJcbiAgICBjb25zdCBtZXMgPSBob3kuZ2V0TW9udGgoKSsxO1xyXG5cclxuICAgIHRyeSB7XHJcblxyXG4gICAgICAgIGF3YWl0IE5vdGlmaWNhY2lvbk1lZGljYWNpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIGRpYTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge3doZXJlOiB7UGVyc29uYXNEZXBlbmRpZW50ZUlkOiBQZXJzb25hc0RlcGVuZGllbnRlSWR9fVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvRGlhcmlvID0gYXdhaXQgUmVnaXN0cm9zRGlhcmlvcy5maW5kT25lKHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICAgIFBlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkLFxyXG4gICAgICAgICAgICAgICAgZmVjaGE6IGhveVN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmKHJlZ2lzdHJvRGlhcmlvID09PSBudWxsKXtcclxuICAgICAgICAgICAgYXdhaXQgUmVnaXN0cm9zRGlhcmlvcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgZmVjaGE6IGhveVN0cmluZyxcclxuICAgICAgICAgICAgICAgIG1lZGljYWNpb25NYW5hbmE6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZWRpY2FjaW9uVGFyZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWVkaWNhY2lvbk5vY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lczogbWVzLFxyXG4gICAgICAgICAgICAgICAgUGVyc29uYXNEZXBlbmRpZW50ZUlkOiBQZXJzb25hc0RlcGVuZGllbnRlSWRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCBSZWdpc3Ryb3NEaWFyaW9zLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWNhY2lvbk1hbmFuYTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHt3aGVyZToge1BlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWNoYTogaG95U3RyaW5nfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKFwiU1VDQ0VTU1wiKTtcclxuXHJcbn0pO1xyXG5cclxucm91dGVyLmdldCgnL3VwZGF0ZVRhcmRlLzppZCcsIHZhbGlkYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy9jb25zdCB7UGVyc29uYXNEZXBlbmRpZW50ZUlkfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgUGVyc29uYXNEZXBlbmRpZW50ZUlkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnN0IGhveSA9IG5ldyBEYXRlKERhdGUubm93KCkpO1xyXG4gICAgY29uc3QgaG95U3RyaW5nID0gaG95LnRvTG9jYWxlRGF0ZVN0cmluZygpXHJcbiAgICBjb25zdCBtZXMgPSBob3kuZ2V0TW9udGgoKSsxO1xyXG5cclxuICAgIGF3YWl0IE5vdGlmaWNhY2lvbk1lZGljYWNpb24udXBkYXRlKHtcclxuICAgICAgICAgICAgdGFyZGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7d2hlcmU6IHtQZXJzb25hc0RlcGVuZGllbnRlSWQ6IFBlcnNvbmFzRGVwZW5kaWVudGVJZH19XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHJlZ2lzdHJvRGlhcmlvID0gYXdhaXQgUmVnaXN0cm9zRGlhcmlvcy5maW5kT25lKHtcclxuICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICBQZXJzb25hc0RlcGVuZGllbnRlSWQ6IFBlcnNvbmFzRGVwZW5kaWVudGVJZCxcclxuICAgICAgICAgICAgZmVjaGE6IGhveVN0cmluZ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KVxyXG5cclxuICAgIGlmKHJlZ2lzdHJvRGlhcmlvID09PSBudWxsKXtcclxuICAgICAgICBhd2FpdCBSZWdpc3Ryb3NEaWFyaW9zLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGZlY2hhOiBob3lTdHJpbmcsXHJcbiAgICAgICAgICAgIG1lZGljYWNpb25NYW5hbmE6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZWRpY2FjaW9uVGFyZGU6IHRydWUsXHJcbiAgICAgICAgICAgIG1lZGljYWNpb25Ob2NoZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lczogbWVzLFxyXG4gICAgICAgICAgICBQZXJzb25hc0RlcGVuZGllbnRlSWQ6IFBlcnNvbmFzRGVwZW5kaWVudGVJZFxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IFJlZ2lzdHJvc0RpYXJpb3MudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgIG1lZGljYWNpb25UYXJkZTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7d2hlcmU6IHtQZXJzb25hc0RlcGVuZGllbnRlSWQ6IFBlcnNvbmFzRGVwZW5kaWVudGVJZCxcclxuICAgICAgICAgICAgICAgICAgICBmZWNoYTogaG95U3RyaW5nfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKFwiU1VDQ0VTU1wiKTtcclxuXHJcbn0pO1xyXG5yb3V0ZXIuZ2V0KCcvdXBkYXRlTm9jaGUvOmlkJywgdmFsaWRhdGVUb2tlbiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvL2NvbnN0IHtQZXJzb25hc0RlcGVuZGllbnRlSWR9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCBQZXJzb25hc0RlcGVuZGllbnRlSWQgPSByZXEucGFyYW1zLmlkO1xyXG4gICAgY29uc3QgaG95ID0gbmV3IERhdGUoRGF0ZS5ub3coKSk7XHJcbiAgICBjb25zdCBob3lTdHJpbmcgPSBob3kudG9Mb2NhbGVEYXRlU3RyaW5nKClcclxuICAgIGNvbnN0IG1lcyA9IGhveS5nZXRNb250aCgpKzE7XHJcblxyXG4gICAgYXdhaXQgTm90aWZpY2FjaW9uTWVkaWNhY2lvbi51cGRhdGUoe1xyXG4gICAgICAgICAgICBub2NoZTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHt3aGVyZToge1BlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkfX1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcmVnaXN0cm9EaWFyaW8gPSBhd2FpdCBSZWdpc3Ryb3NEaWFyaW9zLmZpbmRPbmUoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIFBlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkLFxyXG4gICAgICAgICAgICBmZWNoYTogaG95U3RyaW5nXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pXHJcblxyXG4gICAgaWYocmVnaXN0cm9EaWFyaW8gPT09IG51bGwpe1xyXG4gICAgICAgIGF3YWl0IFJlZ2lzdHJvc0RpYXJpb3MuY3JlYXRlKHtcclxuICAgICAgICAgICAgZmVjaGE6IGhveVN0cmluZyxcclxuICAgICAgICAgICAgbWVkaWNhY2lvbk1hbmFuYTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lZGljYWNpb25UYXJkZTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lZGljYWNpb25Ob2NoZTogdHJ1ZSxcclxuICAgICAgICAgICAgbWVzOiBtZXMsXHJcbiAgICAgICAgICAgIFBlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkXHJcbiAgICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgUmVnaXN0cm9zRGlhcmlvcy51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgbWVkaWNhY2lvbk5vY2hlOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHt3aGVyZToge1BlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlY2hhOiBob3lTdHJpbmd9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVzLmpzb24oXCJTVUNDRVNTXCIpO1xyXG5cclxufSk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvbm90aWZpY2FjaW9uTWVkaWNhY2lvbi86aWQnLCB2YWxpZGF0ZVRva2VuLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IFBlcnNvbmFzRGVwZW5kaWVudGVJZCA9IHJlcS5wYXJhbXMuaWQ7XHJcblxyXG4gICAgY29uc3Qgbm90aWZpY2FjaW9uZXMgPSBhd2FpdCBOb3RpZmljYWNpb25NZWRpY2FjaW9uLmZpbmRBbGwoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIFBlcnNvbmFzRGVwZW5kaWVudGVJZDogUGVyc29uYXNEZXBlbmRpZW50ZUlkLFxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc3Qgbm90aWZpY2FjaW9uTWVkID0gbm90aWZpY2FjaW9uZXNbMF1cclxuXHJcbiAgICByZXMuanNvbihub3RpZmljYWNpb25NZWQpO1xyXG5cclxufSk7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il19